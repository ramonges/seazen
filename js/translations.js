// Translations object
const translations = {
    fr: {
        // Navigation
        'nav.home': 'Accueil',
        'nav.about': '√Ä propos',
        'nav.tours': 'Tours et location',
        'nav.construction': 'Construction',
        'nav.who': 'Qui sommes-nous ?',
        'nav.media': 'TV, radio, presse',
        'nav.news': 'Actualit√©',
        'nav.contact': 'Aide & contact',
        'nav.tours.monaco': 'Entre Monaco et Nice',
        'nav.tours.antibes': 'Entre Antibes et Cannes',
        'nav.boatclub': 'Location Boat Club',
        'nav.dispersion': 'Dispersion des Cendres',
        'nav.solar.boats': 'Bateaux solaires',
        'nav.sre23': 'SEAZENE SRE 23',
        'nav.accompaniment': 'Accompagnement',
        'nav.usage': 'Utilisation',
        'nav.partnership': 'Partenariat',
        'nav.retrofit': 'Retrofit',
        'nav.strategy': 'Strat√©gie',
        
        // Common
        'common.book': 'R√©server maintenant',
        'common.contact': 'Nous contacter',
        'common.more': 'En savoir plus',
        'common.address': 'Adresse : 81 Av. des Ar√®nes de Cimiez 06000 Nice',
        'common.trust': 'Nous faire confiance',
        'common.trust.text': 'Cr√©√© en 2015, SeaZene est membre des F√©d√©ration des Industries Nautiques, Association Fran√ßaise des Bateaux √âlectriques et Alliance Posidonia.',
        'common.trust.label': 'Prim√© au Salon Nautic de Paris ‚Ä¢ Labellis√© Efficient Solutions par la fondation Suisse Solar Impulse',
        'common.copyright': '¬© 2024 SeaZene. Tous droits r√©serv√©s.',
        
        // Home page
        'home.hero.title': 'BATEAUX SOLAIRES',
        'home.hero.subtitle': 'Depuis 2016<br>Avec plus de 17 000 km navigu√©s au solaire, SeaZene propose ses bateaux en tour priv√©, en vente pour les propri√©taires particuliers ou professionnels et en location.',
        'home.hero.book': 'R√©server un tour',
        'home.hero.discover': 'D√©couvrir nos bateaux',
        'home.tours.title': 'Tours priv√©s sur la C√¥te d\'Azur',
        'home.tours.beaulieu.title': 'La baie de Beaulieu-sur-Mer',
        'home.tours.beaulieu.location': 'Entre Nice et Monaco',
        'home.tours.beaulieu.desc': 'Naviguez dans la baie de Beaulieu-sur-Mer, d√©couvrez les villas c√©l√®bres et les eaux cristallines.',
        'home.tours.beaulieu.book': 'R√©servez √† Beaulieu',
        'home.tours.juan.title': 'Le port des Olivettes √† Antibes',
        'home.tours.juan.location': 'Entre Cannes et Antibes',
        'home.tours.juan.desc': 'Explorez le Cap d\'Antibes et les √Æles de L√©rins depuis Juan-les-Pins.',
        'home.tours.juan.book': 'R√©servez √† Juan',
        'home.tours.text1': 'R√©servez maintenant, puis naviguez en famille, entre amis ou en couple √† bord de bateaux silencieux et √©l√©gants avec un capitaine.',
        'home.tours.text2': 'Avec plus de 17 000 visiteurs et z√©ro √©mission de CO‚ÇÇ √† ce jour, SeaZene est n¬∞1 sur TripAdvisor.',
        'home.services.title': 'Nos Services',
        'home.services.construction': 'Construction',
        'home.services.solar.boats': 'Bateaux solaires',
        'home.services.construction.desc': 'Le SeaZene SRE 23 est id√©al pour des escapades de plaisance, fr√©quentes, m√™me de nuit.',
        'home.services.partnership': 'Partenariat',
        'home.services.partnership.desc': 'La navigation solaire peut aussi cr√©er votre emploi. Rejoignez nous en tant que partenaire.',
        'home.services.support': 'Accompagnement',
        'home.services.support.desc': 'Les conseils d\'utilisation et le coaching en r√©trofit accompagnent les plaisanciers.',
        'home.services.rental': 'Location',
        'home.services.boatclub': 'Boat club',
        'home.services.rental.desc': 'Le Club permet la location de bateaux avec ou sans permis avec plus de libert√© et ouvert toute l\'ann√©e. La navigation solaire est un style de vie qui combine une navigation silencieuse sur un bateau plus confortable pour sa taille.',
        'home.testimonials.title': 'T√©moignages',
        'home.news.title': 'Actualit√©s sur la navigation solaire',
        'home.news.vr.title': 'VR 360¬∞: D√©couvrez la C√¥te d\'Azur comme si vous y √©tiez !',
        'home.news.vr.desc': 'D√©monstration immersive avec casque VR & essais r√©els √† Beaulieu-sur-Mer sur un de nos 3 bateaux solaires actifs toute l\'ann√©e.',
        'home.news.press.title': 'Communiqu√© de presse',
        'home.news.press.desc': 'Les bateaux solaires SeaZene en d√©monstration √† l\'UNOC',
        'home.news.unoc.title': 'UNOC : une opportunit√© historique pour Nice',
        'home.news.unoc.desc': 'Conf√©rence des Nations Unies pour pr√©server les oc√©ans + 100 pays + 30 000 participants √† Nice',
        'home.news.readmore': 'Lire la suite ‚Üí',
        'home.news.all': 'Voir toutes les actualit√©s',
        'home.trust.title': 'Nous faire confiance',
        'home.trust.address': 'Adresse :',
    },
    en: {
        // Navigation
        'nav.home': 'Home',
        'nav.about': 'About',
        'nav.tours': 'Tours & Rental',
        'nav.construction': 'Construction',
        'nav.who': 'Who we are',
        'nav.media': 'TV, Radio, Press',
        'nav.news': 'News',
        'nav.contact': 'Help & Contact',
        'nav.tours.monaco': 'Between Monaco and Nice',
        'nav.tours.antibes': 'Between Antibes and Cannes',
        'nav.boatclub': 'Boat Club Rental',
        'nav.dispersion': 'Ashes Scattering',
        'nav.solar.boats': 'Solar Boats',
        'nav.sre23': 'SEAZENE SRE 23',
        'nav.accompaniment': 'Support',
        'nav.usage': 'Usage',
        'nav.partnership': 'Partnership',
        'nav.retrofit': 'Retrofit',
        'nav.strategy': 'Strategy',
        
        // Common
        'common.book': 'Book now',
        'common.contact': 'Contact us',
        'common.more': 'Learn more',
        'common.address': 'Address: 81 Av. des Ar√®nes de Cimiez 06000 Nice',
        'common.trust': 'Trust us',
        'common.trust.text': 'Created in 2015, SeaZene is a member of the French Nautical Industries Federation, French Electric Boats Association and Posidonia Alliance.',
        'common.trust.label': 'Awarded at Paris Nautic Show ‚Ä¢ Labeled Efficient Solutions by the Swiss Solar Impulse Foundation',
        'common.copyright': '¬© 2024 SeaZene. All rights reserved.',
        
        // Home page
        'home.hero.title': 'SOLAR BOATS',
        'home.hero.subtitle': 'Since 2016<br>With over 17,000 km sailed on solar power, SeaZene offers its boats for private tours, sale to private or professional owners, and rental.',
        'home.hero.book': 'Book a tour',
        'home.hero.discover': 'Discover our boats',
        'home.tours.title': 'Private tours on the French Riviera',
        'home.tours.beaulieu.title': 'Beaulieu-sur-Mer Bay',
        'home.tours.beaulieu.location': 'Between Nice and Monaco',
        'home.tours.beaulieu.desc': 'Sail in Beaulieu-sur-Mer Bay, discover famous villas and crystal-clear waters.',
        'home.tours.beaulieu.book': 'Book at Beaulieu',
        'home.tours.juan.title': 'Port des Olivettes in Antibes',
        'home.tours.juan.location': 'Between Cannes and Antibes',
        'home.tours.juan.desc': 'Explore Cap d\'Antibes and the L√©rins Islands from Juan-les-Pins.',
        'home.tours.juan.book': 'Book at Juan',
        'home.tours.text1': 'Book now, then sail with family, friends or as a couple on board silent and elegant boats with a captain.',
        'home.tours.text2': 'With over 17,000 visitors and zero CO‚ÇÇ emissions to date, SeaZene is #1 on TripAdvisor.',
        'home.services.title': 'Our Services',
        'home.services.construction': 'Construction',
        'home.services.solar.boats': 'Solar Boats',
        'home.services.construction.desc': 'The SeaZene SRE 23 is ideal for frequent leisure trips, even at night.',
        'home.services.partnership': 'Partnership',
        'home.services.partnership.desc': 'Solar navigation can also create your job. Join us as a partner.',
        'home.services.support': 'Support',
        'home.services.support.desc': 'Usage advice and retrofit coaching support boaters.',
        'home.services.rental': 'Rental',
        'home.services.boatclub': 'Boat club',
        'home.services.rental.desc': 'The Club allows boat rental with or without a license with more freedom and open year-round. Solar navigation is a lifestyle that combines silent navigation on a boat that is more comfortable for its size.',
        'home.testimonials.title': 'Testimonials',
        'home.news.title': 'News about solar navigation',
        'home.news.vr.title': 'VR 360¬∞: Discover the French Riviera as if you were there!',
        'home.news.vr.desc': 'Immersive demonstration with VR headset & real trials in Beaulieu-sur-Mer on one of our 3 solar boats active year-round.',
        'home.news.press.title': 'Press release',
        'home.news.press.desc': 'SeaZene solar boats on display at UNOC',
        'home.news.unoc.title': 'UNOC: a historic opportunity for Nice',
        'home.news.unoc.desc': 'United Nations Conference to preserve oceans + 100 countries + 30,000 participants in Nice',
        'home.news.readmore': 'Read more ‚Üí',
        'home.news.all': 'See all news',
        'home.trust.title': 'Trust us',
        'home.trust.address': 'Address:',
    },
    es: {
        // Navigation
        'nav.home': 'Inicio',
        'nav.about': 'Acerca de',
        'nav.tours': 'Tours y alquiler',
        'nav.construction': 'Construcci√≥n',
        'nav.who': 'Qui√©nes somos',
        'nav.media': 'TV, Radio, Prensa',
        'nav.news': 'Noticias',
        'nav.contact': 'Ayuda y contacto',
        'nav.tours.monaco': 'Entre M√≥naco y Niza',
        'nav.tours.antibes': 'Entre Antibes y Cannes',
        'nav.boatclub': 'Alquiler Boat Club',
        'nav.dispersion': 'Dispersi√≥n de cenizas',
        'nav.solar.boats': 'Barcos solares',
        'nav.sre23': 'SEAZENE SRE 23',
        'nav.accompaniment': 'Acompa√±amiento',
        'nav.usage': 'Uso',
        'nav.partnership': 'Asociaci√≥n',
        'nav.retrofit': 'Retrofit',
        'nav.strategy': 'Estrategia',
        
        // Common
        'common.book': 'Reservar ahora',
        'common.contact': 'Cont√°ctanos',
        'common.more': 'Saber m√°s',
        'common.address': 'Direcci√≥n: 81 Av. des Ar√®nes de Cimiez 06000 Nice',
        'common.trust': 'Conf√≠e en nosotros',
        'common.trust.text': 'Creado en 2015, SeaZene es miembro de la Federaci√≥n de Industrias N√°uticas, Asociaci√≥n Francesa de Barcos El√©ctricos y Alianza Posidonia.',
        'common.trust.label': 'Premiado en el Sal√≥n N√°utico de Par√≠s ‚Ä¢ Certificado Efficient Solutions por la fundaci√≥n suiza Solar Impulse',
        'common.copyright': '¬© 2024 SeaZene. Todos los derechos reservados.',
        
        // Home page
        'home.hero.title': 'BARCOS SOLARES',
        'home.hero.subtitle': 'Desde 2016<br>Con m√°s de 17 000 km navegados con energ√≠a solar, SeaZene ofrece sus barcos en tours privados, en venta para propietarios particulares o profesionales y en alquiler.',
        'home.hero.book': 'Reservar un tour',
        'home.hero.discover': 'Descubrir nuestros barcos',
        'home.tours.title': 'Tours privados en la Costa Azul',
        'home.tours.beaulieu.title': 'La bah√≠a de Beaulieu-sur-Mer',
        'home.tours.beaulieu.location': 'Entre Niza y M√≥naco',
        'home.tours.beaulieu.desc': 'Navegue en la bah√≠a de Beaulieu-sur-Mer, descubra las villas famosas y las aguas cristalinas.',
        'home.tours.beaulieu.book': 'Reservar en Beaulieu',
        'home.tours.juan.title': 'El puerto de Olivettes en Antibes',
        'home.tours.juan.location': 'Entre Cannes y Antibes',
        'home.tours.juan.desc': 'Explore el Cabo de Antibes y las islas de L√©rins desde Juan-les-Pins.',
        'home.tours.juan.book': 'Reservar en Juan',
        'home.tours.text1': 'Reserve ahora, luego navegue en familia, entre amigos o en pareja a bordo de barcos silenciosos y elegantes con un capit√°n.',
        'home.tours.text2': 'Con m√°s de 17 000 visitantes y cero emisiones de CO‚ÇÇ hasta la fecha, SeaZene es n¬∞1 en TripAdvisor.',
        'home.services.title': 'Nuestros Servicios',
        'home.services.construction': 'Construcci√≥n',
        'home.services.solar.boats': 'Barcos solares',
        'home.services.construction.desc': 'El SeaZene SRE 23 es ideal para escapadas de placer frecuentes, incluso de noche.',
        'home.services.partnership': 'Asociaci√≥n',
        'home.services.partnership.desc': 'La navegaci√≥n solar tambi√©n puede crear su empleo. √önase a nosotros como socio.',
        'home.services.support': 'Acompa√±amiento',
        'home.services.support.desc': 'Los consejos de uso y el coaching en retrofit acompa√±an a los navegantes.',
        'home.services.rental': 'Alquiler',
        'home.services.boatclub': 'Boat club',
        'home.services.rental.desc': 'El Club permite el alquiler de barcos con o sin licencia con m√°s libertad y abierto todo el a√±o. La navegaci√≥n solar es un estilo de vida que combina una navegaci√≥n silenciosa en un barco m√°s c√≥modo para su tama√±o.',
        'home.testimonials.title': 'Testimonios',
        'home.news.title': 'Noticias sobre navegaci√≥n solar',
        'home.news.vr.title': 'VR 360¬∞: ¬°Descubra la Costa Azul como si estuviera all√≠!',
        'home.news.vr.desc': 'Demostraci√≥n inmersiva con casco VR y pruebas reales en Beaulieu-sur-Mer en uno de nuestros 3 barcos solares activos todo el a√±o.',
        'home.news.press.title': 'Comunicado de prensa',
        'home.news.press.desc': 'Los barcos solares SeaZene en demostraci√≥n en la UNOC',
        'home.news.unoc.title': 'UNOC: una oportunidad hist√≥rica para Niza',
        'home.news.unoc.desc': 'Conferencia de las Naciones Unidas para preservar los oc√©anos + 100 pa√≠ses + 30 000 participantes en Niza',
        'home.news.readmore': 'Leer m√°s ‚Üí',
        'home.news.all': 'Ver todas las noticias',
        'home.trust.title': 'Conf√≠e en nosotros',
        'home.trust.address': 'Direcci√≥n:',
    },
    it: {
        // Navigation
        'nav.home': 'Home',
        'nav.about': 'Chi siamo',
        'nav.tours': 'Tour e noleggio',
        'nav.construction': 'Costruzione',
        'nav.who': 'Chi siamo',
        'nav.media': 'TV, Radio, Stampa',
        'nav.news': 'Notizie',
        'nav.contact': 'Aiuto e contatto',
        'nav.tours.monaco': 'Tra Monaco e Nizza',
        'nav.tours.antibes': 'Tra Antibes e Cannes',
        'nav.boatclub': 'Noleggio Boat Club',
        'nav.dispersion': 'Dispersione delle ceneri',
        'nav.solar.boats': 'Barche solari',
        'nav.sre23': 'SEAZENE SRE 23',
        'nav.accompaniment': 'Supporto',
        'nav.usage': 'Uso',
        'nav.partnership': 'Partnership',
        'nav.retrofit': 'Retrofit',
        'nav.strategy': 'Strategia',
        
        // Common
        'common.book': 'Prenota ora',
        'common.contact': 'Contattaci',
        'common.more': 'Scopri di pi√π',
        'common.address': 'Indirizzo: 81 Av. des Ar√®nes de Cimiez 06000 Nizza',
        'common.trust': 'Fidati di noi',
        'common.trust.text': 'Creato nel 2015, SeaZene √® membro della Federazione delle Industrie Nautiche, Associazione Francese delle Barche Elettriche e Alleanza Posidonia.',
        'common.trust.label': 'Premiato al Salone Nautico di Parigi ‚Ä¢ Certificato Efficient Solutions dalla fondazione svizzera Solar Impulse',
        'common.copyright': '¬© 2024 SeaZene. Tutti i diritti riservati.',
        
        // Home page
        'home.hero.title': 'BARCHE SOLARI',
        'home.hero.subtitle': 'Dal 2016<br>Con oltre 17 000 km navigati a energia solare, SeaZene propone le sue barche in tour privati, in vendita per proprietari privati o professionali e in noleggio.',
        'home.hero.book': 'Prenota un tour',
        'home.hero.discover': 'Scopri le nostre barche',
        'home.tours.title': 'Tour privati sulla Costa Azzurra',
        'home.tours.beaulieu.title': 'La baia di Beaulieu-sur-Mer',
        'home.tours.beaulieu.location': 'Tra Nizza e Monaco',
        'home.tours.beaulieu.desc': 'Naviga nella baia di Beaulieu-sur-Mer, scopri le ville famose e le acque cristalline.',
        'home.tours.beaulieu.book': 'Prenota a Beaulieu',
        'home.tours.juan.title': 'Il porto delle Olivette ad Antibes',
        'home.tours.juan.location': 'Tra Cannes e Antibes',
        'home.tours.juan.desc': 'Esplora Cap d\'Antibes e le isole di L√©rins da Juan-les-Pins.',
        'home.tours.juan.book': 'Prenota a Juan',
        'home.tours.text1': 'Prenota ora, poi naviga in famiglia, tra amici o in coppia a bordo di barche silenziose ed eleganti con un capitano.',
        'home.tours.text2': 'Con oltre 17 000 visitatori e zero emissioni di CO‚ÇÇ ad oggi, SeaZene √® n¬∞1 su TripAdvisor.',
        'home.services.title': 'I Nostri Servizi',
        'home.services.construction': 'Costruzione',
        'home.services.solar.boats': 'Barche solari',
        'home.services.construction.desc': 'Il SeaZene SRE 23 √® ideale per escursioni di piacere frequenti, anche di notte.',
        'home.services.partnership': 'Partnership',
        'home.services.partnership.desc': 'La navigazione solare pu√≤ anche creare il tuo lavoro. Unisciti a noi come partner.',
        'home.services.support': 'Supporto',
        'home.services.support.desc': 'I consigli d\'uso e il coaching in retrofit accompagnano i diportisti.',
        'home.services.rental': 'Noleggio',
        'home.services.boatclub': 'Boat club',
        'home.services.rental.desc': 'Il Club permette il noleggio di barche con o senza patente con pi√π libert√† e aperto tutto l\'anno. La navigazione solare √® uno stile di vita che combina una navigazione silenziosa su una barca pi√π comoda per la sua dimensione.',
        'home.testimonials.title': 'Testimonianze',
        'home.news.title': 'Notizie sulla navigazione solare',
        'home.news.vr.title': 'VR 360¬∞: Scopri la Costa Azzurra come se fossi l√¨!',
        'home.news.vr.desc': 'Dimostrazione immersiva con visore VR e prove reali a Beaulieu-sur-Mer su una delle nostre 3 barche solari attive tutto l\'anno.',
        'home.news.press.title': 'Comunicato stampa',
        'home.news.press.desc': 'Le barche solari SeaZene in dimostrazione all\'UNOC',
        'home.news.unoc.title': 'UNOC: un\'opportunit√† storica per Nizza',
        'home.news.unoc.desc': 'Conferenza delle Nazioni Unite per preservare gli oceani + 100 paesi + 30 000 partecipanti a Nizza',
        'home.news.readmore': 'Leggi di pi√π ‚Üí',
        'home.news.all': 'Vedi tutte le notizie',
        'home.trust.title': 'Fidati di noi',
        'home.trust.address': 'Indirizzo:',
    }
};

// Translation function
function t(key, lang = 'fr') {
    return translations[lang] && translations[lang][key] ? translations[lang][key] : key;
}

// Update language selector button
function updateLanguageSelector(lang) {
    const langBtn = document.getElementById('langBtn');
    if (!langBtn) return;
    
    const flags = {
        'fr': 'üá´üá∑',
        'en': 'üá¨üáß',
        'es': 'üá™üá∏',
        'it': 'üáÆüáπ'
    };
    
    const codes = {
        'fr': 'FR',
        'en': 'EN',
        'es': 'ES',
        'it': 'IT'
    };
    
    const flagEl = langBtn.querySelector('.lang-flag');
    const codeEl = langBtn.querySelector('.lang-code');
    
    if (flagEl) flagEl.textContent = flags[lang] || 'üá´üá∑';
    if (codeEl) codeEl.textContent = codes[lang] || 'FR';
    
    // Update active state in dropdown
    document.querySelectorAll('.lang-option').forEach(opt => {
        opt.classList.remove('active');
        if (opt.getAttribute('data-lang') === lang) {
            opt.classList.add('active');
        }
    });
}

// Set language and translate page
function setLanguage(lang) {
    localStorage.setItem('preferredLanguage', lang);
    
    // Update HTML lang attribute
    document.documentElement.lang = lang;
    
    // Update language selector button
    updateLanguageSelector(lang);
    
    // Apply translations to elements with data-i18n attribute
    document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        el.textContent = t(key, lang);
    });
    
    // Translate navigation menu
    translateNavigation(lang);
    
    // Translate common elements
    translateCommonElements(lang);
    
    // Translate page content
    translatePageContent(lang);
}

// Translate navigation menu
function translateNavigation(lang) {
    // Map of French text to translation keys
    const navTexts = {
        'Accueil': t('nav.home', lang),
        '√Ä propos': t('nav.about', lang),
        'Tours et location': t('nav.tours', lang),
        'Construction': t('nav.construction', lang),
        'Qui sommes-nous ?': t('nav.who', lang),
        'TV, radio, presse': t('nav.media', lang),
        'Actualit√©': t('nav.news', lang),
        'Aide & contact': t('nav.contact', lang),
        'Entre Monaco et Nice': t('nav.tours.monaco', lang),
        'Entre Antibes et Cannes': t('nav.tours.antibes', lang),
        'Location Boat Club': t('nav.boatclub', lang),
        'Dispersion des Cendres': t('nav.dispersion', lang),
        'Bateaux solaires': t('nav.solar.boats', lang),
        'SEAZENE SRE 23': t('nav.sre23', lang),
        'Accompagnement': t('nav.accompaniment', lang),
        'Utilisation': t('nav.usage', lang),
        'Partenariat': t('nav.partnership', lang),
        'Retrofit': t('nav.retrofit', lang),
        'Strat√©gie': t('nav.strategy', lang)
    };
    
    // Translate navigation links by href (more reliable)
    const navByHref = {
        'index.html': t('nav.home', lang),
        'qui-sommes-nous.html': t('nav.who', lang),
        'media.html': t('nav.media', lang),
        'actualite.html': t('nav.news', lang),
        'contact.html': t('nav.contact', lang),
        'tours-monaco-nice.html': t('nav.tours.monaco', lang),
        'tours-antibes-cannes.html': t('nav.tours.antibes', lang),
        'boat-club.html': t('nav.boatclub', lang),
        'dispersion-cendres.html': t('nav.dispersion', lang),
        'bateaux-sre23.html': t('nav.sre23', lang),
        'accompagnement-utilisation.html': t('nav.usage', lang),
        'accompagnement-partenariat.html': t('nav.partnership', lang),
        'accompagnement-retrofit.html': t('nav.retrofit', lang),
        'accompagnement-strategie.html': t('nav.strategy', lang)
    };
    
    // First translate main dropdown titles (Tours priv√©s, etc.)
    document.querySelectorAll('.dropdown-title').forEach(title => {
        const text = title.textContent.trim();
        if (navTexts[text]) {
            title.textContent = navTexts[text];
        } else if (text === 'Tours priv√©s') {
            // Special case for "Tours priv√©s" which should stay the same or be translated
            // We'll keep it as is for now since it's a section title
        }
    });
    
    // Translate links by href attribute (more reliable)
    document.querySelectorAll('nav a[href]').forEach(link => {
        const href = link.getAttribute('href');
        if (navByHref[href]) {
            const arrow = link.querySelector('.arrow');
            if (arrow) {
                link.innerHTML = navByHref[href] + ' <span class="arrow">‚ñº</span>';
            } else {
                link.textContent = navByHref[href];
            }
        }
    });
    
    // Translate main nav dropdown triggers (√Ä propos, Tours et location, Construction)
    document.querySelectorAll('.nav-dropdown > .nav-link').forEach(link => {
        let text = link.textContent.trim();
        // Remove arrow if present
        text = text.replace('‚ñº', '').trim();
        
        if (navTexts[text]) {
            link.innerHTML = navTexts[text] + ' <span class="arrow">‚ñº</span>';
        }
    });
}

// Translate common elements
function translateCommonElements(lang) {
    // Translate buttons and common texts
    const commonTexts = {
        'R√©server maintenant': t('common.book', lang),
        'Nous contacter': t('common.contact', lang),
        'En savoir plus': t('common.more', lang),
        'Adresse : 81 Av. des Ar√®nes de Cimiez 06000 Nice': t('common.address', lang),
        'Nous faire confiance': t('common.trust', lang),
        '¬© 2024 SeaZene. Tous droits r√©serv√©s.': t('common.copyright', lang)
    };
    
    // Translate buttons
    document.querySelectorAll('.btn').forEach(btn => {
        const text = btn.textContent.trim();
        if (commonTexts[text]) {
            btn.textContent = commonTexts[text];
        }
    });
    
    // Translate footer
    document.querySelectorAll('footer p, footer a').forEach(el => {
        const text = el.textContent.trim();
        if (commonTexts[text]) {
            el.textContent = commonTexts[text];
        }
    });
}

// Translate page content automatically
function translatePageContent(lang) {
    // Only translate if not already in the target language
    const currentLang = document.documentElement.lang || 'fr';
    if (currentLang === lang && lang !== 'fr') {
        // Already translated, skip
        return;
    }
    
    // Map of French text patterns to translation keys
    const contentMap = {
        // Hero section
        'BATEAUX SOLAIRES': t('home.hero.title', lang),
        'Depuis 2016': 'Depuis 2016',
        'R√©server un tour': t('home.hero.book', lang),
        'D√©couvrir nos bateaux': t('home.hero.discover', lang),
        
        // Tours section
        'Tours priv√©s sur la C√¥te d\'Azur': t('home.tours.title', lang),
        'La baie de Beaulieu-sur-Mer': t('home.tours.beaulieu.title', lang),
        'Entre Nice et Monaco': t('home.tours.beaulieu.location', lang),
        'Naviguez dans la baie de Beaulieu-sur-Mer, d√©couvrez les villas c√©l√®bres et les eaux cristallines.': t('home.tours.beaulieu.desc', lang),
        'R√©servez √† Beaulieu': t('home.tours.beaulieu.book', lang),
        'Le port des Olivettes √† Antibes': t('home.tours.juan.title', lang),
        'Entre Cannes et Antibes': t('home.tours.juan.location', lang),
        'Explorez le Cap d\'Antibes et les √Æles de L√©rins depuis Juan-les-Pins.': t('home.tours.juan.desc', lang),
        'R√©servez √† Juan': t('home.tours.juan.book', lang),
        'R√©servez maintenant, puis naviguez en famille, entre amis ou en couple √† bord de bateaux silencieux et √©l√©gants avec un capitaine.': t('home.tours.text1', lang),
        'Avec plus de 17 000 visiteurs et z√©ro √©mission de CO‚ÇÇ √† ce jour, SeaZene est n¬∞1 sur TripAdvisor.': t('home.tours.text2', lang),
        
        // Services section
        'Nos Services': t('home.services.title', lang),
        'Construction': t('home.services.construction', lang),
        'Bateaux solaires': t('home.services.solar.boats', lang),
        'Le SeaZene SRE 23 est id√©al pour des escapades de plaisance, fr√©quentes, m√™me de nuit.': t('home.services.construction.desc', lang),
        'Partenariat': t('home.services.partnership', lang),
        'La navigation solaire peut aussi cr√©er votre emploi. Rejoignez nous en tant que partenaire.': t('home.services.partnership.desc', lang),
        'Accompagnement': t('home.services.support', lang),
        'Les conseils d\'utilisation et le coaching en r√©trofit accompagnent les plaisanciers.': t('home.services.support.desc', lang),
        'Location': t('home.services.rental', lang),
        'Boat club': t('home.services.boatclub', lang),
        'Le Club permet la location de bateaux avec ou sans permis avec plus de libert√© et ouvert toute l\'ann√©e. La navigation solaire est un style de vie qui combine une navigation silencieuse sur un bateau plus confortable pour sa taille.': t('home.services.rental.desc', lang),
        'D√©couvrir': t('common.more', lang),
        
        // Testimonials
        'T√©moignages': t('home.testimonials.title', lang),
        
        // News section
        'Actualit√©s sur la navigation solaire': t('home.news.title', lang),
        'VR 360¬∞: D√©couvrez la C√¥te d\'Azur comme si vous y √©tiez !': t('home.news.vr.title', lang),
        'D√©monstration immersive avec casque VR & essais r√©els √† Beaulieu-sur-Mer sur un de nos 3 bateaux solaires actifs toute l\'ann√©e.': t('home.news.vr.desc', lang),
        'Communiqu√© de presse': t('home.news.press.title', lang),
        'Les bateaux solaires SeaZene en d√©monstration √† l\'UNOC': t('home.news.press.desc', lang),
        'UNOC : une opportunit√© historique pour Nice': t('home.news.unoc.title', lang),
        'Conf√©rence des Nations Unies pour pr√©server les oc√©ans + 100 pays + 30 000 participants √† Nice': t('home.news.unoc.desc', lang),
        'Lire la suite ‚Üí': t('home.news.readmore', lang),
        'Voir toutes les actualit√©s': t('home.news.all', lang),
        
        // Trust section
        'Nous faire confiance': t('home.trust.title', lang),
        'Adresse :': t('home.trust.address', lang),
    };
    
    // Translate specific elements by selector (more reliable)
    const heroTitle = document.querySelector('.hero-title');
    if (heroTitle) {
        heroTitle.textContent = t('home.hero.title', lang);
    }
    
    const heroSubtitle = document.querySelector('.hero-subtitle');
    if (heroSubtitle) {
        heroSubtitle.innerHTML = t('home.hero.subtitle', lang);
    }
    
    // Translate hero buttons
    const heroBookBtn = document.querySelector('.hero-actions .btn-primary');
    if (heroBookBtn && heroBookBtn.textContent.includes('R√©server un tour')) {
        heroBookBtn.textContent = t('home.hero.book', lang);
    }
    
    const heroDiscoverBtn = document.querySelector('.hero-actions .btn-secondary');
    if (heroDiscoverBtn && heroDiscoverBtn.textContent.includes('D√©couvrir')) {
        heroDiscoverBtn.textContent = t('home.hero.discover', lang);
    }
    
    // Translate section titles
    document.querySelectorAll('.section-title').forEach(title => {
        const text = title.textContent.trim();
        if (contentMap[text]) {
            title.textContent = contentMap[text];
        }
    });
    
    // Translate feature cards (tours section)
    document.querySelectorAll('.feature-card').forEach((card, index) => {
        const title = card.querySelector('h3');
        const location = card.querySelector('p strong');
        const desc = card.querySelectorAll('p');
        const btn = card.querySelector('.btn');
        
        if (index === 0 && title && title.textContent.includes('Beaulieu')) {
            title.textContent = t('home.tours.beaulieu.title', lang);
            if (location) location.textContent = t('home.tours.beaulieu.location', lang);
            if (desc[1]) desc[1].textContent = t('home.tours.beaulieu.desc', lang);
            if (btn) btn.textContent = t('home.tours.beaulieu.book', lang);
        } else if (index === 1 && title && title.textContent.includes('Olivettes')) {
            title.textContent = t('home.tours.juan.title', lang);
            if (location) location.textContent = t('home.tours.juan.location', lang);
            if (desc[1]) desc[1].textContent = t('home.tours.juan.desc', lang);
            if (btn) btn.textContent = t('home.tours.juan.book', lang);
        }
    });
    
    // Translate services section
    document.querySelectorAll('.about-preview h3, .about-preview h4').forEach(heading => {
        const text = heading.textContent.trim();
        if (contentMap[text]) {
            heading.textContent = contentMap[text];
        }
    });
    
    // Translate paragraphs in services section
    document.querySelectorAll('.about-preview p').forEach(p => {
        const text = p.textContent.trim();
        if (contentMap[text]) {
            p.textContent = contentMap[text];
        }
    });
    
    // Translate news articles
    document.querySelectorAll('article h3').forEach(h3 => {
        const text = h3.textContent.trim();
        if (contentMap[text]) {
            h3.textContent = contentMap[text];
        }
    });
    
    document.querySelectorAll('article p').forEach(p => {
        const text = p.textContent.trim();
        if (contentMap[text]) {
            p.textContent = contentMap[text];
        }
    });
    
    // Translate buttons in articles
    document.querySelectorAll('article .btn').forEach(btn => {
        const text = btn.textContent.trim();
        if (contentMap[text]) {
            btn.textContent = contentMap[text];
        }
    });
    
    // Translate trust section
    const trustTitle = document.querySelector('.cta-section h2');
    if (trustTitle && trustTitle.textContent.includes('confiance')) {
        trustTitle.textContent = t('home.trust.title', lang);
    }
    
    // Translate paragraphs in trust section
    document.querySelectorAll('.cta-section p').forEach(p => {
        let text = p.textContent.trim();
        if (text.includes('Cr√©√© en 2015')) {
            p.textContent = t('common.trust.text', lang);
        } else if (text.includes('Prim√© au Salon')) {
            p.textContent = t('common.trust.label', lang);
        } else if (text.includes('Adresse :')) {
            p.innerHTML = '<strong>' + t('home.trust.address', lang) + '</strong> 81 Av. des Ar√®nes de Cimiez 06000 Nice';
        }
    });
}

// Translate page function (can be called from main.js)
function translatePage(lang) {
    setLanguage(lang);
}

// Initialize language on page load
document.addEventListener('DOMContentLoaded', () => {
    const savedLang = localStorage.getItem('preferredLanguage') || 'fr';
    updateLanguageSelector(savedLang);
    setLanguage(savedLang);
});

